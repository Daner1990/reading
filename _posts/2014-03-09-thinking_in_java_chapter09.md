---
layout: post
title: Java编程思想 - 第九章、接口
categories: Java编程思想
tags: Java编程思想
---

###本章主题

这一章讲接口。那么，既然JAVA是面向对象，有了类和对象。为什么还要有接口呢？答案是**为了更好的复用**。所以衍生出了抽象类、接口等概念。这一章可能不太容易理解清楚，所以放慢一点。

###1. 抽象类和接口

在博客中有一篇文章:[JAVA抽象类和接口](http://www.thinkingbar.com/2013/08/19/java%E6%8A%BD%E8%B1%A1%E7%B1%BB%E5%92%8C%E6%8E%A5%E5%8F%A3/)

###2. 完全解耦

这个算是设计模式方面的东西吧，还不算理解。但是稍微知道一点就是在代码设计中，尽量避免高耦合的情况出现。如前面项目中出现的问题就是由于高耦合引起的：

> 业务A需要业务B处理，而且是完成之后才能继续干活。那么，在压力比较大的情况下，B处理不过来的时候，就会挂掉，或者处理时间过长。那么就会引起A无缘无故等待过长时间，这样A等待的时间长，干活的时间少。时间长也会挂掉。这样，由于高耦合性，B挂掉也会连累A。后来，通过一个缓冲层将A/B解耦合，那么，无论A/B谁挂掉，都不会影响对方的工作。

所以，完全解耦是高效率代码的一个基本准则。举个简单的例子：

> 有一个类A，含有静态方法a(B b)，如果B是一个class，那么传入A.a()中的只能是B或者B的子类。但如果C类和B具有相同的公共接口，那它还是无法传入A.a()中。这就给代码复用带来了一点麻烦。而如果我们将A.a()中传入的参数变为interface,那么，B、C实现这个接口以后，都可以传入，就完成了代码的复用。具体例子可参考《Thinking In Java》P174-P178的代码。

###3. 多重继承

这个算是这章的重点，也是Java的重点。在C++中，一个类通过继承多个基类完成多重继承，而Java由于只允许单继承，所以要实现多重继承就要借助其它方法——接口+类（类或者抽象类）+内部类，一般情况下是单继承一个类，然后通过实现接口（本类或者内部类）来完成多重继承的任务。

这里比较困难的就是：extends只有一个，我该extends谁？剩下的implements到底是本类执行还是内部类执行？总的来说就是2个选择：

1. extends谁
2. implements interface由本类做还是内部类做？

这其实是一个好设计的基础，按我的理解，extends因为只有一个，所以要专注最重要的特性，同时，在将复用的时候说过，判断继承的原则就是是否需要向上转型。我们认真思考一下就知道了，这个子类一定算是父类公开接口的某一个实现（一般情况下是多个子类实现父类的接口，然后完成动态绑定的任务）。那么，extends的就是最重要的特性。

而对于implements，能用本类的情况就不要用内部类，因为内部类一般情况是想实现“内部”的功能，想对使用者透明（就比如没个容器自己实现一个private的迭代器）。另外一点，内部类的本质是为了使多重继承更加完整。所以下一章会努力找到“什么时候使用内部类”的答案。